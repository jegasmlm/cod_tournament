(this.webpackJsonpcod_tournament=this.webpackJsonpcod_tournament||[]).push([[0],{51:function(e,t,a){},52:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),s=a(19),r=a.n(s),i=(a(51),a(10)),l=a(3),o=(a(52),a(20)),u=a(8),j=a(11),d=a(12),m=a(6),h=a.n(m);function b(e){if(!e)return[];var t=[];return Object.keys(e).forEach((function(a){t.push(e[a])})),t}var f=a(29);a(53),a(56),a(98);f.a.initializeApp({apiKey:"AIzaSyAQ2d6W3c1EpZ27yNxaBp8p0yIRWOIb1uE",authDomain:"warzonetournament-247ef.firebaseapp.com",projectId:"warzonetournament-247ef",storageBucket:"warzonetournament-247ef.appspot.com",messagingSenderId:"350451124321",appId:"1:350451124321:web:2a40d2cb3c5245139cc220",measurementId:"G-2GMB0XHEP4"}),f.a.auth().useDeviceLanguage();var p=f.a,O=p.database(),v=function(){function e(){Object(j.a)(this,e)}return Object(d.a)(e,[{key:"detach",value:function(){O.ref("t").off()}},{key:"save",value:function(e){var t=O.ref().child("t").push();e.id=t.key,t.set(e);var a={};b(e.players).forEach((function(t){a["ut/".concat(t.id,"/").concat(e.id)]={name:e.name}})),O.ref().update(a)}},{key:"update",value:function(e,t){O.ref("t/".concat(e)).set(t)}},{key:"close",value:function(e){var t={};return t["/t/"+e+"/open/"]=!1,O.ref().update(t)}},{key:"delete",value:function(e){O.ref("t/".concat(e)).remove()}},{key:"list",value:function(e){O.ref("t").on("value",(function(t){e(b(t.val()))}))}},{key:"read",value:function(e,t){O.ref("t/".concat(t)).on("value",(function(t){var a=t.val();a&&a.teams&&Object.keys(a.teams).forEach((function(e){var t=[];a.teams[e].players.forEach((function(e){t.push(b(a.players).find((function(t){return t.id===e})))})),a.teams[e].players=t})),e(a)}))}},{key:"saveTeam",value:function(e,t){var a=Object(i.a)(Object(i.a)({},t),{},{players:t.players.map((function(e){return e.id}))}),n=O.ref().child("t/".concat(e,"/teams/")).push();a.id=n.key,n.set(a)}},{key:"deleteTeam",value:function(e,t){O.ref("t/".concat(e,"/teams/").concat(t)).remove()}},{key:"listPlayers",value:function(e,t){O.ref("t/".concat(t,"/players/")).on("value",(function(t){e(t.val())}))}},{key:"listTeams",value:function(e,t){this.read((function(t){t&&e(b(t.teams))}),t)}},{key:"getTeam",value:function(e,t,a){O.ref("t/".concat(t,"/teams/").concat(a)).on("value",(function(t){e(t.val())}))}},{key:"saveMatch",value:function(e,t,a){var n=O.ref().child("t/".concat(e,"/teams/").concat(t,"/matches")).push();a.id=n.key,n.set(a)}},{key:"deleteMatch",value:function(e,t,a){O.ref("t/".concat(e,"/teams/").concat(t,"/matches/").concat(a)).remove()}},{key:"listMatches",value:function(e,t,a){O.ref("t/".concat(t,"/teams/").concat(a,"/matches")).on("value",(function(t){e(b(t.val()))}))}},{key:"getMatch",value:function(e,t,a,n){O.ref("t/".concat(t,"/teams/").concat(a,"/matches/").concat(n)).on("value",(function(t){e(t.val())}))}},{key:"saveTeams",value:function(e,t){var a=this;t.forEach((function(t){a.saveTeam(e,t)}))}},{key:"searchById",value:function(e,t){var a=-1;return e.forEach((function(e,n){e.id===t&&(a=n)})),a}},{key:"getMatchPoint",value:function(e){return this.getPositionPoint(e.position)+this.getMatchKills(e)}},{key:"getMatchKills",value:function(e){return h.a.sum(e.teamScore.map((function(e){return parseInt(e.kills)})))}},{key:"getPositionPoint",value:function(e){switch(e){case"1":return 20;case"2":return 15;case"3":return 10;case"4":return 5;case"5":return 3;case"6":return 2;default:return 0}}},{key:"getKillPoint",value:function(e){return e}},{key:"getDamagePoint",value:function(e){return 0}},{key:"getScorePoint",value:function(e){return 0}},{key:"getResults",value:function(e){var t=this,a=b(Object(i.a)({},e.players)),n={};a.forEach((function(a){n[a.id]||(n[a.id]={player:a,kills:0,damage:0,points:0,total:0}),Object.keys(e.teams).forEach((function(c){var s=e.teams[c];s.matches&&Object.keys(s.matches).forEach((function(e){var c=s.matches[e];s.players.indexOf(a)>-1&&(n[a.id].points+=t.getPositionPoint(c.position),n[a.id].total+=t.getPositionPoint(c.position)),c.teamScore.forEach((function(e){a.id===e.player&&(n[a.id].kills+=parseInt(e.kills),n[a.id].damage+=parseInt(e.damage),n[a.id].total+=parseInt(e.kills))}))}))}))}));var c=[];return Object.keys(n).forEach((function(e){c.push(n[e])})),{players:h.a.orderBy(c,["total"],["desc"]),teams:h.a.orderBy(b(e.teams).map((function(e){var a=h.a.sumBy(b(e.matches),(function(e){return h.a.sumBy(e.teamScore,(function(e){return parseInt(e.kills)}))})),n=h.a.sumBy(b(e.matches),(function(e){return t.getPositionPoint(e.position)}));return{teamId:e.id,name:e.name,players:e.players,kills:a,damage:h.a.sumBy(b(e.matches),(function(e){return h.a.sumBy(e.teamScore,(function(e){return parseInt(e.damage)}))})),points:n,total:a+n}})),["total"],["desc"])}}}]),e}(),x=a(16),y=a.n(x),g=a(22),N=function(){function e(){Object(j.a)(this,e)}return Object(d.a)(e,[{key:"fetchAdjective",value:function(){var e=Object(g.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.wordnik.com/v4/words.json/randomWord?hasDictionaryDef=true&includePartOfSpeech=adjective&excludePartOfSpeech=noun&minCorpusCount=4000&maxCorpusCount=-1&minDictionaryCount=1&maxDictionaryCount=-1&minLength=5&maxLength=-1&api_key=3qau38zh6aixg8gd1xr6k801vhldnnjrow6p6in5h3pxgeuls").then((function(e){return e.json()})).then((function(e){return e.word})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchNoun",value:function(){var e=Object(g.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.wordnik.com/v4/words.json/randomWord?hasDictionaryDef=false&includePartOfSpeech=noun&minCorpusCount=100000&maxCorpusCount=-1&minDictionaryCount=1&maxDictionaryCount=-1&minLength=5&maxLength=-1&api_key=3qau38zh6aixg8gd1xr6k801vhldnnjrow6p6in5h3pxgeuls").then((function(e){return e.json()})).then((function(e){return e.word})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getName",value:function(){var e=Object(g.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchNoun();case 2:return e.t0=e.sent,e.t1=e.t0+" ",e.next=6,this.fetchAdjective();case 6:return e.t2=e.sent,e.abrupt("return",e.t1+e.t2);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),k=function(){function e(){Object(j.a)(this,e)}return Object(d.a)(e,[{key:"getRedirectResult",value:function(e){p.auth().getRedirectResult().then((function(t){e(t,null)})).catch((function(t){e(null,t)}))}},{key:"loggedUser",value:function(){return p.auth().currentUser}},{key:"liveLoggedUser",value:function(e){p.auth().onAuthStateChanged(e)}},{key:"login",value:function(e,t){return p.auth().signInWithEmailAndPassword(e,t)}},{key:"signup",value:function(e,t){return p.auth().createUserWithEmailAndPassword(e,t)}},{key:"logout",value:function(){p.auth().signOut()}},{key:"popupGoogleLogin",value:function(){var e=new p.auth.GoogleAuthProvider;return p.auth().signInWithPopup(e)}},{key:"googleLogin",value:function(){var e=new p.auth.GoogleAuthProvider;p.auth().signInWithRedirect(e)}},{key:"facebookLogin",value:function(){var e=new p.auth.FacebookAuthProvider;p.auth().signInWithRedirect(e)}},{key:"appleLogin",value:function(){}},{key:"twitterLogin",value:function(){}},{key:"microsoftLogin",value:function(){}}]),e}(),S=p.storage().ref(),w=function(){function e(){Object(j.a)(this,e)}return Object(d.a)(e,[{key:"getPath",value:function(e){return S.child(e).getDownloadURL()}},{key:"listGuns",value:function(){return S.child("guides/weapons").listAll()}},{key:"uploadAvatar",value:function(e,t,a){var n=t.name.split(".");S.child("avatars/".concat(e,".").concat(n[n.length-1])).put(t).then((function(e){a(e)}))}}]),e}(),C=function(){function e(){Object(j.a)(this,e)}return Object(d.a)(e,[{key:"uriEncode",value:function(e){return encodeURIComponent(e)}},{key:"getPlayerInfo",value:function(e){return fetch("https://my.callofduty.com/api/papi-client/stats/cod/v1/title/mw/platform/battle/gamer/".concat(this.uriEncode(e),"/profile/type/mp")).then((function(e){return e.json()}))}},{key:"playerFriends",value:function(e){return fetch("https://my.callofduty.com/api/papi-client/stats/cod/v1/title/mw/platform/battle/gamer/".concat(this.uriEncode(e),"/profile/friends/type/mp")).then((function(e){return e.json()}))}},{key:"matchInfo",value:function(e){return fetch("https://www.callofduty.com/api/papi-client/crm/cod/v2/title/mw/platform/battle/fullMatch/wz/".concat(e,"/it")).then((function(e){return e.json()}))}}]),e}(),I=p.database(),P=function(){function e(){Object(j.a)(this,e)}return Object(d.a)(e,[{key:"detach",value:function(){I.ref("t").off()}},{key:"save",value:function(e,t){I.ref("users/"+e.id).set(e,t)}},{key:"update",value:function(e,t,a){console.debug("Updating"),I.ref("ut/".concat(e)).on("value",(function(n){var c={};c["/users/".concat(e)]=t,Object.keys(n.val()).forEach((function(a){c["/t/".concat(a,"/players/").concat(e)]=t})),I.ref().update(c,a)}))}},{key:"delete",value:function(e){I.ref("users/".concat(e)).remove()}},{key:"list",value:function(e){I.ref("users").on("value",(function(t){e(b(t.val()))}))}},{key:"read",value:function(e,t){I.ref("users/".concat(e)).on("value",(function(e){var a=e.val();t&&t(a)}))}},{key:"readOnce",value:function(e,t){I.ref("users/".concat(e)).once("value").then((function(e){t(e.val())}))}}]),e}(),E=new(function(){function e(){Object(j.a)(this,e)}return Object(d.a)(e,[{key:"auth",value:function(){return new k}},{key:"storage",value:function(){return new w}},{key:"users",value:function(){return new P}},{key:"tournaments",value:function(){return new v}},{key:"names",value:function(){return new N}},{key:"cod",value:function(){return new C}}]),e}()),T=a(35),z=a.n(T),U=a(0);z.a.setAppElement("#root");var L=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],s=a[1],r={inset:"auto",minWith:"99vw",maxHeight:"80vh",overflow:"visible",width:"lg"===e.size?"90%":"md"===e.size?"60%":"auto",padding:"0",backgroundColor:"#111e",border:"1px solid #2f2c",boxShadow:"0px 0px 20px rgb(0, 0, 0, .4)"};Object(n.useEffect)((function(){return s(e.isOpen[0])}),[e]);return Object(U.jsxs)(z.a,{isOpen:c,onRequestClose:e.onRequestClose,closeTimeoutMS:300,style:{overlay:{backgroundColor:"#000a"},content:r},children:[Object(U.jsx)("div",{className:"h-layout justify-right",children:Object(U.jsx)("button",{className:"btn--secondary",onClick:function(){return e.isOpen[0]=!1,void s(!1)},children:Object(U.jsx)("i",{className:"fa fa-times"})})}),Object(U.jsx)("div",{className:"container v-layout align-stretch",style:{paddingTop:"0"},children:e.children})]})},D=a.p+"static/media/noobAvatar.72bfd947.jpg";var M=function(e){var t=e.url,a=e.big;return null===t?Object(U.jsx)("img",{className:"avatar ".concat(a?"avatar--big":""),src:D}):Object(U.jsx)("img",{className:"avatar ".concat(a?"avatar--big":""),src:t})};a(71);var R=function(e){var t=e.back,a=Object(n.useState)(!1),c=Object(l.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(null),o=Object(l.a)(i,2),u=o[0],j=o[1],d=Object(n.useState)(null),m=Object(l.a)(d,2),h=m[0],b=m[1];Object(n.useEffect)((function(){var e=E.auth().loggedUser();return E.users().read(e.uid,(function(e){e&&(j(e),b(e.avatar))})),document.addEventListener("mousedown",p),function(){document.removeEventListener("mousedown",p)}}),[]);var f=Object(n.useRef)(null),p=function(e){f.current&&!f.current.contains(e.target)&&r(!1)};return Object(U.jsxs)("div",{className:"top-bar",children:[t&&Object(U.jsx)("button",{className:"btn--secondary text-accent",onClick:function(){return document.location="#"},children:Object(U.jsx)("i",{className:"fa fa-chevron-left"})}),!t&&Object(U.jsx)("div",{}),Object(U.jsxs)("div",{className:"h-layout",children:[Object(U.jsxs)("div",{className:"top-bar-user h-layout relative",onClick:function(){return r(!s)},children:[u&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(M,{url:h}),Object(U.jsx)("h3",{className:"text-sm hidde-mobile ml",children:u.name?u.name:u.email.split("@")[0]}),u.gamerTag&&Object(U.jsx)("h4",{className:"text-sm ml hidde-mobile",children:u.gamerTag})]}),s&&Object(U.jsx)("div",{ref:f,className:"card mt float-menu",children:Object(U.jsx)("button",{className:"btn--sm btn--secondary",onClick:function(){return document.location="#editUser/"},children:"Update info"})})]}),Object(U.jsx)("button",{className:"btn--secondary",onClick:function(){return E.auth().logout(),void(window.location="#")},children:Object(U.jsx)("i",{className:"fa fa-power-off"})})]})]})},B=a(28),A=a(100),W=(a(72),a(99)),K=a(101);a(73);var F=function(e){var t=e.player,a=e.horizontal,n=e.size,c=e.className,s=e.onClick,r=e.style,l=e.props;return Object(U.jsxs)("div",Object(i.a)(Object(i.a)({className:c+(a?" h-layout align-center justify-left flex-nowrap":" v-layout")+" ",onClick:s,style:r},l),{},{children:[Object(U.jsx)(M,{big:"lg"===n,url:t&&t.avatar||null}),Object(U.jsx)("span",{className:"".concat("sm"===n?"text-sm":"xs"===n?"text-xs":"lg"===n?"text-lg":""," text-secondary"),style:{marginLeft:a?4:0,marginTop:a?0:4},children:t&&t.name||t})]}),t&&t.id||t)};window.paypal.Buttons.driver("react",{React:c.a,ReactDOM:r.a});var Y=function(e){var t=e.onSave,a=Object(n.useState)([]),c=Object(l.a)(a,2),s=c[0],r=c[1],o=Object(n.useState)(""),u=Object(l.a)(o,2),j=u[0],d=u[1],m=Object(n.useState)({}),h=Object(l.a)(m,2),f=h[0],p=h[1],O=Object(n.useState)(!1),v=Object(l.a)(O,2),x=v[0],y=v[1],g=Object(n.useState)(""),N=Object(l.a)(g,2),k=N[0],S=N[1],w=Object(n.useState)(4),C=Object(l.a)(w,2),I=C[0],P=C[1],T=Object(n.useState)({}),z=Object(l.a)(T,2),L=z[0],D=z[1];Object(n.useEffect)((function(){E.users().list((function(e){r(e)}))}),[]),Object(n.useEffect)((function(){M()}),[k,I,L]);var M=function(){y(""!==k&&""!==I&&b(L).length>=I)},R=function(e){if(d(e),""!==e){var t=s.filter((function(t){return(t.name.toLowerCase().includes(e.toLowerCase())||t.gamerTag.toLowerCase().includes(e.toLowerCase())||t.email.includes(e.toLowerCase()))&&-1===b(L).map((function(e){return e.id})).indexOf(t.id)})),a={};t.forEach((function(e){a[e.id]=e})),p(a)}else p({})},B=b(L).map((function(e){return Object(U.jsx)(W.a,{timeout:400,classNames:"input-list-item",children:Object(U.jsxs)("div",{className:"mb h-layout justify-stretch",children:[Object(U.jsx)("input",{disabled:!0,className:"flex-grow",id:"playerNameInput"+e.id,type:"text",value:e.name,placeholder:"Player Name",onChange:function(t){return function(e,t){var a=Object(i.a)({},L);a[e].name=t,D(a)}(e.id,t.target.value)}}),Object(U.jsx)("button",{className:"btn--secondary text-accent",onClick:function(){return function(e){var t=Object(i.a)({},L);delete t[e],D(t)}(e.id)},children:Object(U.jsx)("i",{className:"fa fa-minus"})})]})},e.id)})),A=b(f).map((function(e){return Object(U.jsx)(F,{className:"btn btn--secondary btn--sm h-layout",style:{marginRight:4,marginTop:4},player:e,size:"sm",onClick:function(){return function(e){var t=Object(i.a)({},L);t[e]=f[e],R(""),console.log(t),D(t)}(e.id)}})}));return Object(U.jsxs)("div",{className:"mt v-layout align-stretch",children:[Object(U.jsx)("h2",{children:"Create Tournament"}),Object(U.jsxs)("div",{className:"v-layout align-stretch",children:[Object(U.jsx)("div",{className:"form-group h-layout",children:Object(U.jsx)("input",{className:"flex-grow",id:"tournamentNameInput",type:"text",value:k,onChange:function(e){return S(e.target.value)},placeholder:"Tournament Name"})}),Object(U.jsxs)("div",{className:"form-group h-layout",children:[Object(U.jsx)("label",{className:"flex-grow mr",htmlFor:"teamSizeInput",children:"Team size"}),Object(U.jsx)("input",{id:"teamSizeInput",type:"number",value:I,onChange:function(e){return P(e.target.value)},autoComplete:"off",min:"1",max:"4"})]})]}),Object(U.jsxs)("div",{className:"z2 v-layout align-stretch relative",children:[Object(U.jsx)("div",{className:"h-layout justify-left",children:Object(U.jsx)("h3",{className:"flex-grow",children:"Add Players"})}),Object(U.jsx)("input",{className:"mb",type:"text",value:j,onChange:function(e){return R(e.target.value)},placeholder:"Search player ..."}),b(f).length>0&&Object(U.jsx)("div",{className:"h-layout justify-left card float-menu searched-players",children:A}),Object(U.jsx)(K.a,{children:B})]}),Object(U.jsx)("button",{class:"z1",onClick:function(){x&&(E.tournaments().save({created:new Date,open:!0,name:k,teamSize:I,players:L,teams:[]}),t())},disabled:!x,children:"save"})]})},q=a(23),G=a.n(q);a(79);var H=function(e){var t=e.tournament,a=b(t.players).map((function(e,t){return Object(U.jsx)(F,{style:{marginTop:4,marginLeft:4},size:"xs",player:e})}));return Object(U.jsxs)("div",{className:"card tournament-card",onClick:function(){return window.location="#tournament/"+t.id},children:[Object(U.jsxs)("div",{className:"h-layout",children:[Object(U.jsx)("h3",{className:"flex-grow mr-3",children:t.name}),t.open&&Object(U.jsx)("button",{className:"btn--secondary",onClick:function(e){return function(e){e.stopPropagation(),E.tournaments().delete(t.id)}(e)},children:Object(U.jsx)("i",{className:"fas fa-trash"})})]}),Object(U.jsx)("span",{className:"text-sm text-hint",children:G()(t.created).format("MM/DD/YYYY")}),Object(U.jsxs)("p",{children:["Team size: ",t.teamSize]}),Object(U.jsx)("h3",{children:"Players"}),Object(U.jsx)("div",{className:"h-layout justify-left",children:a})]})};a(80);var _=function(e){var t=e.tournaments.map((function(e,t){return Object(U.jsx)(W.a,{timeout:400,classNames:"card",children:Object(U.jsx)(H,{tournament:e,tIndex:t})},e.id)}));return Object(U.jsx)(K.a,{className:"h-layout tournament-list align-left",children:t})};a(81);var J=function(){var e=Object(n.useState)([!1]),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),r=Object(l.a)(s,2),i=r[0],o=r[1];Object(n.useEffect)((function(){return u(),function(){return E.tournaments().detach()}}),[]);var u=function(){E.tournaments().list((function(e){o(e)}))};return Object(U.jsxs)("div",{className:"home v-layout",children:[Object(U.jsx)(R,{}),Object(U.jsx)("div",{className:"flex-grow v-layout start-tournament-btn",children:Object(U.jsx)("button",{onClick:function(){return c([!0])},children:"Start Tournament"})}),Object(U.jsx)("h3",{children:"Tournaments"}),Object(U.jsx)(_,{tournaments:i}),Object(U.jsx)(L,{isOpen:a,onRequestClose:function(){return c([!1])},size:"sm",children:Object(U.jsx)(Y,{onSave:function(){return c([!1])}})})]})},Q=(a(82),a(83),E.cod());var X=function(e){var t=e.team,a=e.onSave,c=Object(n.useState)(!1),s=Object(l.a)(c,2),r=s[0],o=s[1],u=Object(n.useState)(""),j=Object(l.a)(u,2),d=j[0],m=j[1],h=Object(n.useState)(!1),b=Object(l.a)(h,2),f=b[0],p=b[1],O=Object(n.useState)({id:Object(A.a)(),created:new Date,position:"",teamScore:t.players.map((function(e){return{player:e.id,kills:"",damage:""}}))}),v=Object(l.a)(O,2),x=v[0],y=v[1];Object(n.useEffect)((function(){g()}),[x]);var g=function(){var e=!0;x.teamScore.forEach((function(t){""!==t.kills&&""!==t.damage||(e=!1)})),p(""!==x.position&&e)},N=x.teamScore.map((function(e,a){var n=t.players.find((function(t){return t.id===e.player}));return Object(U.jsxs)("div",{className:"form-group match-player-form",children:[Object(U.jsx)("label",{className:"flex-grow mr",children:n.name||e.player}),Object(U.jsx)("input",{id:"playerNameInput"+a,type:"number",value:e.kills,placeholder:"Kills",onChange:function(e){return function(e,t){var a=Object(i.a)({},x);a.teamScore[e].kills=t,y(a)}(a,e.target.value)},autoComplete:"off",min:"1",max:"100"}),Object(U.jsx)("input",{className:"",id:"playerNameInput"+a,type:"number",value:e.damage,placeholder:"Dmg",onChange:function(e){return function(e,t){var a=Object(i.a)({},x);a.teamScore[e].damage=t,y(a)}(a,e.target.value)},autoComplete:"off",min:"1",max:"100000"})]},a)}));return Object(U.jsxs)("div",{className:"v-layout align-stretch",children:[Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{className:"form-group h-layout",children:[Object(U.jsx)("label",{className:"flex-grow",htmlFor:"matchPositionInput",children:"Match Id"}),Object(U.jsx)("input",{className:"",id:"matchIdInput",type:"text",value:d,onChange:function(e){return m(e.target.value)}}),Object(U.jsx)("button",{onClick:function(){""===d||r||(o(!0),Q.matchInfo(d).then((function(e){o(!1);var t=Object(i.a)({},x);x.teamScore.forEach((function(a,n){a.player.codUsername&&e.data.allPlayers.forEach((function(e){e.player.username.toLowerCase().includes(a.player.codUsername.toLowerCase())&&(t.teamScore[n].kills=e.playerStats.kills,t.teamScore[n].damage=e.playerStats.damageDone,t.position=e.playerStats.teamPlacement)}))})),t.codId=d,y(t)})))},children:"Load"})]}),Object(U.jsxs)("div",{className:"form-group h-layout",children:[Object(U.jsx)("label",{className:"flex-grow",htmlFor:"matchPositionInput",children:"Match Position"}),Object(U.jsx)("input",{id:"matchPositionInput",type:"number",value:x.position,onChange:function(e){return function(e){var t=Object(i.a)({},x);t.position=e,y(t)}(e.target.value)},autoComplete:"off",min:"1",max:"99"})]})]}),Object(U.jsxs)("div",{children:[Object(U.jsx)("h3",{className:"flex-grow text-accent",children:"Players"}),N]}),Object(U.jsx)("button",{onClick:function(){f&&(E.tournaments().saveMatch(t.tournamentId,t.id,x),a())},disabled:!f,children:"save"})]})};a(84);var Z=function(e){var t=e.tournamentOpen,a=e.tournamentId,c=e.match,s=e.onDelete,r=E.tournaments(),i=Object(n.useState)(!1),o=Object(l.a)(i,2),u=o[0],j=o[1],d=Object(n.useState)([]),m=Object(l.a)(d,2),h=m[0],f=m[1];Object(n.useEffect)((function(){E.tournaments().listPlayers((function(e){f(b(e))}),a)}),[]);var p=c.teamScore.map((function(e,t){var a=h.find((function(t){return t.id===e.player}));return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:Object(U.jsx)(F,{size:"sm",horizontal:!0,player:a})}),Object(U.jsx)("td",{children:e.kills}),Object(U.jsx)("td",{children:e.damage})]},t)}));return Object(U.jsxs)("div",{id:c.id,className:"match card",onClick:function(){return j(!u)},children:[Object(U.jsxs)("div",{className:"h-layout justify-sb text-sm",children:[Object(U.jsxs)("div",{children:[Object(U.jsx)("span",{className:"text-accent text-bold",children:"Kills: "}),r.getMatchKills(c)]}),Object(U.jsxs)("div",{children:[Object(U.jsx)("span",{className:"text-accent text-bold ml",children:"Pts: "}),r.getPositionPoint(c.position)]}),Object(U.jsxs)("div",{children:[Object(U.jsx)("span",{className:"text-accent text-bold ml",children:"Total: "}),r.getMatchPoint(c)]}),t&&Object(U.jsx)("div",{className:"ml",onClick:function(e){return s(e,c)},children:Object(U.jsx)("i",{className:"fas fa-trash"})})]}),Object(U.jsxs)("div",{className:(u?"match--open":"")+" mt match-detail",style:{maxHeight:u?document.querySelector("#".concat(CSS.escape(c.id)," .match-detail")).scrollHeight+"px":0},children:[c.created&&Object(U.jsxs)("div",{className:"text-sm",children:["Date: ",G()(c.created).format("MM/DD/YYYY")]}),Object(U.jsxs)("div",{className:"text-sm",children:["Position: ",c.position]}),Object(U.jsxs)("table",{className:"mt",children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{style:{width:"100%"},children:"Player"}),Object(U.jsx)("th",{children:"Kills"}),Object(U.jsx)("th",{children:"Dmg"})]})}),Object(U.jsx)("tbody",{children:p})]})]})]})};a(85);var V=function(e){var t=e.tournamentOpen,a=e.tournamentId,c=e.teamId,s=e.onDelete,r=Object(n.useState)([]),i=Object(l.a)(r,2),o=i[0],u=i[1];Object(n.useEffect)((function(){j()}),[c]);var j=function(){E.tournaments().listMatches((function(e){u(e)}),a,c)},d=o.map((function(e,n){return Object(U.jsx)(W.a,{timeout:400,classNames:"card",children:Object(U.jsx)(Z,{tournamentOpen:t,match:e,onDelete:s,tournamentId:a})},e.id)}));return Object(U.jsx)(K.a,{className:"match-list",children:d})};a(86);var $=function(e){var t=e.tournamentOpen,a=e.team,c=Object(n.useState)([!1]),s=Object(l.a)(c,2),r=s[0],i=s[1],o=a.players.filter((function(e){return e})).map((function(e,t){return Object(U.jsx)(F,{className:"mr mb",size:"xs",player:e},e.id||t)}));return Object(U.jsxs)("div",{className:"card v-layout align-stretch",children:[Object(U.jsxs)("div",{className:"h-layout",children:[Object(U.jsx)("h3",{className:"text-sm flex-grow",children:a.name?a.name:a.id.substring(0,4)}),t&&Object(U.jsx)("button",{className:"btn--secondary",onClick:function(){E.tournaments().deleteTeam(a.tournamentId,a.id)},children:Object(U.jsx)("i",{className:"fas fa-trash"})})]}),t&&Object(U.jsx)("button",{className:"btn--tertiary flex-grow",onClick:function(){return i([!0])},children:"Add Match"}),Object(U.jsx)("h4",{className:"text-sm text-bold text-accent",children:"Players"}),Object(U.jsx)("div",{className:"h-layout justify-stretch",children:o}),Object(U.jsx)("h4",{className:"text-sm text-bold text-accent",children:"Matches"}),Object(U.jsx)(V,{tournamentOpen:t,tournamentId:a.tournamentId,teamId:a.id,onDelete:function(e,t){return function(e,t){e.stopPropagation(),E.tournaments().deleteMatch(a.tournamentId,a.id,t.id)}(e,t)}}),Object(U.jsx)(L,{isOpen:r,onRequestClose:function(){return i([!1])},size:"sm",children:Object(U.jsx)(X,{team:a,onSave:function(){i([!1])}})})]})};a(87);var ee=function(e){var t=e.tournamentOpen,a=e.tournamentId,c=Object(n.useState)([]),s=Object(l.a)(c,2),r=s[0],i=s[1];Object(n.useEffect)((function(){o()}),[a]);var o=function(){E.tournaments().listTeams((function(e){i(e)}),a)},u=r.map((function(e,a){return Object(U.jsx)(W.a,{timeout:400,classNames:"card",children:Object(U.jsx)($,{tournamentOpen:t,team:e})},e.id)}));return Object(U.jsx)(K.a,{className:"team-list h-layout align-left",children:u})};a(88);var te=function(e){var t=e.achievement;return Object(U.jsxs)("div",{className:"card v-layout",children:[Object(U.jsx)("div",{children:Object(U.jsx)("img",{width:72,src:t.icon})}),Object(U.jsx)("h3",{className:"text-sm text-accent mt",children:t.name}),Object(U.jsx)(F,{horizontal:!0,player:t.player}),Object(U.jsxs)("div",{className:"mt",children:[Object(U.jsxs)("span",{className:"text-sm text-accent",children:[t.attr,": "]}),t.value]}),Object(U.jsxs)("div",{className:"mt text-sm text-hint",children:["(",t.description,")"]})]})},ae=(a(89),a.p+"static/media/bloodSpatter.59422425.png"),ne=a.p+"static/media/bloodyKnife.1db5e642.png",ce=a.p+"static/media/toolbox.aa6ccd4a.png",se=a.p+"static/media/bird.9a8bc9ee.png",re=a.p+"static/media/tiredSoldier.22b050e8.png",ie=a.p+"static/media/heavyLoad.73ee4516.png";var le=function(e){var t=e.result,a=[];if(t.players.length>0){var n=h.a.maxBy(h.a.shuffle(t.players),(function(e){return e.kills})),c=h.a.minBy(h.a.shuffle(t.players),(function(e){return e.kills})),s=h.a.maxBy(h.a.shuffle(t.players),(function(e){return e.damage})),r=h.a.minBy(h.a.shuffle(t.players),(function(e){return e.damage})),i=h.a.maxBy(h.a.shuffle(t.players),(function(e){return e.points})),l=h.a.minBy(h.a.shuffle(t.players),(function(e){return e.points}));a.push({name:"Assassin",player:n.player,attr:"Kills",value:n.kills,description:"Highest Kills",icon:ae,iconColor:"yellow"}),a.push({name:"Butcher",player:s.player,attr:"Damage",value:s.damage,description:"Highest Damage",icon:ne,iconColor:"red"}),a.push({name:"Support",player:i.player,attr:"Match Pts",value:i.points,description:"Highest Points",icon:ce,iconColor:"aqua"}),a.push({name:"Bird Hunter",player:c.player,attr:"Kills",value:c.kills,description:"Lowest Kills",icon:se,iconColor:"aliceblue"}),a.push({name:"Sleeping",player:r.player,attr:"Damage",value:r.damage,description:"Lowest Damage",icon:re,iconColor:"gray"}),a.push({name:"Load",player:l.player,attr:"Match Pts",value:l.points,description:"Lowest Points",icon:ie,iconColor:"purple"})}var o=a.map((function(e,t){return Object(U.jsx)(te,{achievement:e},t)}));return Object(U.jsx)("div",{className:"achievement-list h-layout align-stretch",children:o})};var oe=function(e){var t=e.playerScore,a=e.place;return Object(U.jsxs)("div",{className:"place ".concat(1===a?"first-place":2===a?"second-place":"third-place"," ml mr"),children:[Object(U.jsx)(F,{size:"lg",player:t.player}),Object(U.jsxs)("div",{className:"box v-layout",children:[Object(U.jsxs)("h1",{className:"text-white m0",children:[a,Object(U.jsx)("span",{className:"text-sm",children:1===a?"ft":2===a?"nd":"rd"})]}),Object(U.jsxs)("span",{className:"text-sm mt",children:[parseInt(t.kills)+parseInt(t.points)," Pts"]})]}),Object(U.jsxs)("div",{className:"v-layout text-sm mt",children:[Object(U.jsxs)("span",{children:["Kills: ",t.kills]}),Object(U.jsxs)("span",{children:["Match Pts: ",t.points]})]})]})};a(90);var ue=function(e){var t=e.tournament,a=Object(n.useState)(0),c=Object(l.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)({players:[],teams:[]}),o=Object(l.a)(i,2),u=o[0],j=o[1];Object(n.useEffect)((function(){var e=document.getElementById("result-slider");e.scrollTo({top:0,left:e.scrollWidth/4*s,behavior:"smooth"})}),[s]),Object(n.useEffect)((function(){j(E.tournaments().getResults(t))}),[t]);var d=u.players.map((function(e,t){return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:t+1}),Object(U.jsx)("td",{children:Object(U.jsx)(F,{horizontal:!0,player:e.player})}),Object(U.jsx)("td",{children:e.kills}),Object(U.jsx)("td",{children:e.points}),Object(U.jsx)("td",{children:parseInt(e.kills)+parseInt(e.points)})]},"playerScore-"+t)})),m=u.teams.map((function(e,t){return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:t+1}),Object(U.jsx)("td",{children:e.name?e.name:e.teamId.substring(0,4)}),Object(U.jsx)("td",{children:e.kills}),Object(U.jsx)("td",{children:e.points}),Object(U.jsx)("td",{children:parseInt(e.kills)+parseInt(e.points)})]},"teamScore-"+t)}));return Object(U.jsxs)("div",{className:"v-layout result mt-3",children:[Object(U.jsx)("h3",{children:"Results"}),Object(U.jsxs)("div",{id:"result-slider",className:"result-slider",children:[Object(U.jsx)("div",{className:"result-slide v-layout justify-right",children:u.players.length>0&&Object(U.jsxs)("div",{className:"h-layout align-right",style:{minHeight:"400px"},children:[u.players.length>1&&Object(U.jsx)(oe,{playerScore:u.players[1],place:2}),u.players.length>0&&Object(U.jsx)(oe,{playerScore:u.players[0],place:1}),u.players.length>2&&Object(U.jsx)(oe,{playerScore:u.players[2],place:3})]})}),Object(U.jsxs)("div",{className:"result-slide v-layout",children:[Object(U.jsx)("h3",{className:"mt-3",children:"Player Score Table"}),Object(U.jsx)("div",{className:"table-container",children:Object(U.jsxs)("table",{children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{children:"#"}),Object(U.jsx)("th",{children:"Player"}),Object(U.jsx)("th",{children:"Kills"}),Object(U.jsx)("th",{children:"Pts"}),Object(U.jsx)("th",{children:"Total"})]})}),Object(U.jsx)("tbody",{children:d})]})})]}),Object(U.jsxs)("div",{className:"result-slide v-layout",children:[Object(U.jsx)("h3",{className:"mt-3",children:"Team Score Table"}),Object(U.jsx)("div",{className:"table-container",children:Object(U.jsxs)("table",{children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{children:"#"}),Object(U.jsx)("th",{children:"Team"}),Object(U.jsx)("th",{children:"Kills"}),Object(U.jsx)("th",{children:"Pts"}),Object(U.jsx)("th",{children:"Total"})]})}),Object(U.jsx)("tbody",{children:m})]})})]}),Object(U.jsxs)("div",{className:"result-slide v-layout",children:[Object(U.jsx)("h3",{className:"mt-3",children:"Achievements"}),Object(U.jsx)(le,{result:u})]})]}),Object(U.jsxs)("div",{className:"dots",children:[Object(U.jsx)("div",{className:0===s?"active":"",onClick:function(){return r(0)}}),Object(U.jsx)("div",{className:1===s?"active":"",onClick:function(){return r(1)}}),Object(U.jsx)("div",{className:2===s?"active":"",onClick:function(){return r(2)}}),Object(U.jsx)("div",{className:3===s?"active":"",onClick:function(){return r(3)}})]})]})};a(91);var je=function(e){var t=e.tournamentId,a=e.players,c=e.teamSize,s=e.onSave,r=Object(n.useState)(!1),i=Object(l.a)(r,2),o=i[0],u=i[1],j=Object(n.useState)([]),d=Object(l.a)(j,2),m=d[0],h=d[1];Object(n.useEffect)((function(){a.forEach((function(e,t){-1===m.indexOf(t)&&(document.getElementById((e.id||e)+"_checkbox").checked=!1)})),b()}),[m]);var b=function(){u(m.length===parseInt(c))},f=a.map((function(e,t){return Object(U.jsxs)("div",{className:"h-layout mt",children:[Object(U.jsx)("label",{htmlFor:(e.id||e)+"_checkbox",className:"flex-grow",children:e.name||e}),Object(U.jsx)("input",{type:"checkbox",id:(e.id||e)+"_checkbox",checked:m.indexOf(t)>-1,onChange:function(e){return function(e,t){var a=Object(B.a)(m);if(t)a.push(e);else{var n=m.indexOf(e);n>-1&&a.splice(n,1)}var s=a.slice(Math.max(0,a.length-c),a.length);h(s)}(t,e.target.checked)}})]},t)}));return Object(U.jsxs)("div",{className:"v-layout align-stretch",children:[Object(U.jsxs)("div",{children:[Object(U.jsx)("h3",{className:"text-accent",children:"Players"}),f]}),Object(U.jsx)("button",{className:"mt",onClick:function(){o&&E.names().getName().then((function(e){E.tournaments().saveTeam(t,{name:e,tournamentId:t,players:m.map((function(e){return a[e]})),matches:[]}),s(m)}))},disabled:!o,children:"save"})]})},de=(a(92),[]);var me=function(e){var t=e.tournamentId,a=e.teamSize,c=e.players,s=e.onSave,r=Object(n.useState)(null),i=Object(l.a)(r,2),o=i[0],u=i[1],j=Object(n.useState)([{name:"",players:[]}]),d=Object(l.a)(j,2),m=d[0],b=d[1];Object(n.useEffect)((function(){f().then((function(){p()})).catch((function(e){u(e.message)}))}),[]);var f=function(){var e=Object(g.a)(y.a.mark((function e(){var t,n,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de=[],t=c.length/a,n=0;case 3:if(!(n<t)){e.next=11;break}return e.next=6,E.names().getName();case 6:s=e.sent,de.push("undefined undefined"===s?Object(A.a)().substring(0,4):s);case 8:n++,e.next=3;break;case 11:return e.abrupt("return",de);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){for(var e=c.length/a,n=h.a.shuffle(c),s=[],r=0;r<e;r++){for(var i=[],l=0;l<a;l++)r*a+l<c.length&&i.push(n[r*a+l]);s.push({id:Object(A.a)(),name:de[r],tournamentId:t,players:i,matches:[]})}b(s)},O=function(e){E.tournaments().saveTeams(t,e)},v=function(){var e=Object(g.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(m),e.next=3,f();case 3:s();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=m.map((function(e,t){var a=e.players.map((function(e){return Object(U.jsx)("span",{className:"mr",children:e.name||e},e.id||e)}));return Object(U.jsxs)("div",{className:"mb-3",children:[Object(U.jsx)("h3",{children:e.name}),Object(U.jsx)("div",{className:"h-layout justify-left",children:a})]},t)}));return Object(U.jsxs)("div",{children:[o&&Object(U.jsx)("span",{children:o}),x,Object(U.jsxs)("div",{className:"h-layout justify-stretch",children:[Object(U.jsx)("button",{className:"flex-grow",onClick:function(){return p()},children:"Generate"}),Object(U.jsx)("button",{className:"ml",onClick:function(){return v()},children:"save"})]})]})};var he=function(e){var t=Object(n.useState)([!1]),a=Object(l.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)([!1]),i=Object(l.a)(r,2),o=i[0],u=i[1],j=Object(n.useState)({name:"",teamSize:0,players:[],teams:[]}),d=Object(l.a)(j,2),m=d[0],h=d[1];Object(n.useEffect)((function(){return f(),function(){E.tournaments().detach()}}),[]);var f=function(){E.tournaments().read((function(e){h(e)}),e.match.params.id)},p=b(m.players).map((function(e,t){return Object(U.jsx)(F,{className:"mr",size:"sm",player:e},e.id||t)}));return Object(U.jsxs)("div",{className:"tournament v-layout",children:[Object(U.jsx)(R,{back:!0}),Object(U.jsx)("h2",{children:m.name}),Object(U.jsxs)("div",{className:"mb h-layout",children:[Object(U.jsxs)("div",{className:"mr-3",children:[Object(U.jsx)("span",{className:"text-accent text-sm",children:"Date"})," ",G()(m.created).format("MM/DD/YYYY")]}),Object(U.jsxs)("div",{children:[Object(U.jsx)("span",{className:"text-accent text-sm",children:"Team size"})," ",m.teamSize]})]}),Object(U.jsx)("div",{className:"h-layout",children:p}),m.teams&&Object(U.jsx)(ue,{tournament:m}),Object(U.jsx)("h3",{className:"mt-3",children:"Teams"}),m.open&&Object(U.jsxs)("div",{className:"h-layout",children:[Object(U.jsx)("button",{className:"mr mb btn--danger",onClick:function(){E.tournaments().close(m.id)},children:"Close Tournament"}),Object(U.jsx)("button",{className:"mr mb",onClick:function(){return u([!0])},children:"Generate Teams"}),Object(U.jsx)("button",{className:"mb",onClick:function(){return s([!0])},children:"Add Team"})]}),m.teams&&Object(U.jsx)(ee,{tournamentOpen:m.open,tournamentId:m.id}),Object(U.jsx)(L,{isOpen:c,onRequestClose:function(){return s([!1])},size:"sm",children:Object(U.jsx)(je,{tournamentId:m.id,players:b(m.players),teamSize:m.teamSize,onSave:function(e){s([!1])}})}),Object(U.jsx)(L,{isOpen:o,onRequestClose:function(){return u([!1])},size:"sm",children:Object(U.jsx)(me,{tournamentId:m.id,teamSize:m.teamSize,players:b(m.players),onSave:function(e){u([!1])}})})]})};a(93);var be=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),r=Object(l.a)(s,2),i=r[0],u=r[1],j=Object(n.useState)(!1),d=Object(l.a)(j,2),m=d[0],h=d[1],b=Object(n.useState)(""),f=Object(l.a)(b,2),p=f[0],O=f[1];return Object(n.useEffect)((function(){E.auth().getRedirectResult((function(e,t){t&&O(t.message)}))}),[]),Object(n.useEffect)((function(){h(""!==a&&""!==i)}),[a,i]),Object(U.jsxs)("div",{className:"login-container v-layout",children:[Object(U.jsxs)("div",{className:"login v-layout ml-3 mr-3",children:[Object(U.jsx)("h2",{children:"Warzone Tournaments"}),""!==p&&Object(U.jsxs)("div",{children:[" ",p," "]}),Object(U.jsx)("input",{className:"mt-3",type:"email",name:"email",placeholder:"Email",value:a,onChange:function(e){return c(e.target.value)}}),Object(U.jsx)("input",{className:"mt-2 mb-3",type:"password",name:"password",placeholder:"Password",value:i,onChange:function(e){return u(e.target.value)}}),Object(U.jsx)("button",{className:"mt-3",onClick:function(){E.auth().login(a,i).catch((function(e){e&&O(e.message)}))},disabled:!m,children:"LOGIN"}),Object(U.jsxs)("div",{className:"h-layout text-sm mt-3",children:["don't have an account?",Object(U.jsx)("span",{className:"btn--secondary",children:Object(U.jsx)(o.b,{to:"/signup",children:"Sign up"})})]})]}),Object(U.jsxs)("div",{className:"socials h-layout mt-2",children:[Object(U.jsx)("button",{className:"mr mt",onClick:function(){return E.auth().googleLogin()},children:Object(U.jsx)("i",{className:"fa-2x fab fa-google"})}),Object(U.jsx)("button",{className:"mt",onClick:function(){return E.auth().facebookLogin()},children:Object(U.jsx)("i",{className:"fa-2x fab fa-facebook"})})]})]})};a(96);var fe=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),r=Object(l.a)(s,2),i=r[0],u=r[1],j=Object(n.useState)(""),d=Object(l.a)(j,2),m=d[0],h=d[1],b=Object(n.useState)(!1),f=Object(l.a)(b,2),p=f[0],O=f[1];return Object(n.useEffect)((function(){O(""!==a&&""!==i&&i===m)}),[a,i,m]),Object(U.jsx)("div",{className:"login-container v-layout",children:Object(U.jsxs)("div",{className:"login v-layout ml-3 mr-3",children:[Object(U.jsx)("h2",{children:"Warzone Tournaments"}),Object(U.jsx)("input",{className:"mt-3",type:"email",name:"email",placeholder:"Email",value:a,onChange:function(e){return c(e.target.value)}}),Object(U.jsx)("input",{className:"mt-2",type:"password",name:"password",placeholder:"Password",value:i,onChange:function(e){return u(e.target.value)}}),Object(U.jsx)("input",{className:"mt-2 mb-3",type:"password",name:"password",placeholder:"Confirm Password",value:m,onChange:function(e){return h(e.target.value)}}),Object(U.jsx)("button",{className:"mt-3",onClick:function(){E.auth().signup(a,i)},disabled:!p,children:"Sign up"}),Object(U.jsxs)("div",{className:"h-layout text-sm mt-3",children:["already have an account?",Object(U.jsx)("span",{className:"btn--secondary",children:Object(U.jsx)(o.b,{to:"/login",children:"Login"})})]})]})})};var pe=function(e){var t=e.onSave,a=Object(n.useState)(E.auth().loggedUser().photoURL),c=Object(l.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(E.auth().loggedUser().email),o=Object(l.a)(i,2),u=o[0],j=o[1],d=Object(n.useState)(E.auth().loggedUser().displayName),m=Object(l.a)(d,2),h=m[0],b=m[1],f=Object(n.useState)(""),p=Object(l.a)(f,2),O=p[0],v=p[1],x=Object(n.useState)("battlenet"),y=Object(l.a)(x,2),g=y[0],N=y[1],k=Object(n.useState)(""),S=Object(l.a)(k,2),w=S[0],C=S[1],I=Object(n.useState)(null),P=Object(l.a)(I,2),T=P[0],z=P[1],L=Object(n.useState)(!1),B=Object(l.a)(L,2),A=B[0],W=B[1],K=Object(n.useState)(!1),F=Object(l.a)(K,2),Y=F[0],q=F[1],G=Object(n.useRef)(null);Object(n.useEffect)((function(){E.users().readOnce(E.auth().loggedUser().uid,(function(e){e&&(q(!0),r(e.avatar),j(e.email),b(e.name),v(e.codUsername),N(e.platform),C(e.gamerTag))}))}),[]),Object(n.useEffect)((function(){var e=""!==h&&""!==O&&""!==w,t=!0;if("battlenet"===g){var a=w.split("#");(2!==a.length||isNaN(a[1])||isNaN(parseFloat(a[1])))&&(t=!1)}else t=!isNaN(w)&&!isNaN(parseFloat(w));W(e&&t)}),[h,O,w,g]);var H=function(e){Y?E.users().update(E.auth().loggedUser().uid,{id:E.auth().loggedUser().uid,name:h,email:u,avatar:e,codUsername:O,platform:g,gamerTag:w},(function(){document.location="#",t()})):E.users().save({id:E.auth().loggedUser().uid,name:h,email:u,avatar:e,codUsername:O,platform:g,gamerTag:w},(function(){document.location="#",t()}))};return Object(U.jsxs)("div",{className:"v-layout",children:[Object(U.jsx)(R,{back:!0}),Object(U.jsxs)("div",{className:"card align-stretch v-layout",children:[Object(U.jsx)("h3",{children:"Update your user info"}),Object(U.jsx)("label",{className:"text-sm text-hint",children:"Please update your information so you can participate in tournaments"}),Object(U.jsxs)("div",{className:"h-layout mt-2",children:[Object(U.jsx)("input",{ref:G,type:"file",accept:"image/png, image/jpeg",hidden:!0,onChange:function(e){return function(e){try{if(e.target.files.length>0){z(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]);r(t)}}catch(e){}}(e)}}),Object(U.jsxs)("div",{style:{cursor:"pointer"},className:"avatar avatar--big relative",onClick:function(){G&&G.current.click()},children:[Object(U.jsx)(M,{big:!0,url:s||null}),Object(U.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"128px",height:"128px",background:"#0004",borderRadius:"50%"}}),Object(U.jsx)("label",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(U.jsx)("i",{className:"fas fa-upload"})})]})]}),Object(U.jsx)("div",{className:"mt text-sm text-hint",style:{alignSelf:"center"},children:"You can upload a new avatar"}),Object(U.jsxs)("div",{className:"mt-2 justify-stretch align-center form-group",children:[Object(U.jsx)("label",{style:{minWidth:"30%"},className:"mr",children:"Email"}),Object(U.jsx)("input",{className:"flex-grow",value:u,onChange:function(e){return j(e.target.value)},disabled:!0})]}),Object(U.jsxs)("div",{className:"form-group mt",children:[Object(U.jsx)("label",{style:{minWidth:"30%"},className:"mr",children:"Name"}),Object(U.jsx)("input",{className:"flex-grow",value:h,onChange:function(e){return b(e.target.value)},placeholder:"Tournament username ..."})]}),Object(U.jsxs)("div",{className:"form-group mt",children:[Object(U.jsxs)("label",{style:{minWidth:"30%"},className:"mr",children:["Call of duty",Object(U.jsx)("br",{}),"username"]}),Object(U.jsx)("input",{className:"flex-grow",value:O,onChange:function(e){return t=e.target.value,void v(t);var t},placeholder:"Your call of duty username ..."})]}),Object(U.jsx)("div",{className:"mb text-sm text-hint",children:"The exact username you use in call of duty, so we can track your progress"}),Object(U.jsxs)("div",{className:"form-group mt",children:[Object(U.jsxs)("select",{style:{minWidth:"30%"},value:g,onChange:function(e){return N(e.target.value)},children:[Object(U.jsx)("option",{className:"select-option",value:"battlenet",children:"BattleNet"}),Object(U.jsx)("option",{className:"select-option",value:"activision",children:"Activision"})]}),Object(U.jsx)("input",{className:"flex-grow ",placeholder:"battlenet"===g?"Battlenet Id (Bob#2586)...":"Actividion Id ...",value:w,onChange:function(e){return t=e.target.value,void C(t);var t}})]}),Object(U.jsx)("button",{className:"mt",onClick:function(){return function(){var e=E.auth().loggedUser();s!==e.photoURL&&T?E.storage().uploadAvatar(e.uid,T,(function(e){e&&E.storage().getPath(e.ref.fullPath).then((function(e){H(e)}))})):e.photoURL?H(s):H(D)}()},disabled:!A,children:"Save"})]})]})};var Oe=function(){var e=Object(n.useState)({loggedUser:null,isUserSet:!1}),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){E.auth().liveLoggedUser((function(e){e?E.users().read(e.uid,(function(t){c(t?{loggedUser:e,isUserSet:!0}:{loggedUser:e,isUserSet:!1})})):c({loggedUser:null,isUserSet:!1})}))}),[]),a.loggedUser?Object(U.jsxs)("div",{className:"app",children:[Object(U.jsx)("div",{className:"app-bg"}),Object(U.jsx)("div",{className:"app-content",children:Object(U.jsx)(o.a,{children:Object(U.jsxs)(u.d,{children:[!a.isUserSet&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(u.b,{path:"/editUser",children:Object(U.jsx)(pe,{onSave:function(){return c(Object(i.a)(Object(i.a)({},a),{},{isUserSet:!0}))}})}),Object(U.jsx)(u.a,{to:"/editUser"})]}),Object(U.jsx)(u.a,{exact:!0,from:"/login",to:"/"}),Object(U.jsx)(u.a,{exact:!0,from:"/signup",to:"/"}),Object(U.jsx)(u.b,{path:"/tournament/:id",component:he}),Object(U.jsx)(u.b,{path:"/editUser",children:Object(U.jsx)(pe,{onSave:function(){}})}),Object(U.jsx)(u.b,{path:"/",children:Object(U.jsx)(J,{})})]})})})]}):Object(U.jsxs)("div",{className:"app",children:[Object(U.jsx)("div",{className:"app-bg"}),Object(U.jsx)(o.a,{children:Object(U.jsxs)(u.d,{children:[Object(U.jsx)(u.b,{path:"/signup",children:Object(U.jsx)(fe,{})}),Object(U.jsx)(u.b,{path:"/login",children:Object(U.jsx)(be,{})}),Object(U.jsx)(u.a,{to:"/login"})]})})]})},ve=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,102)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};r.a.render(Object(U.jsx)(c.a.StrictMode,{children:Object(U.jsx)(Oe,{})}),document.getElementById("root")),ve()}},[[97,1,2]]]);
//# sourceMappingURL=main.83dbb71c.chunk.js.map